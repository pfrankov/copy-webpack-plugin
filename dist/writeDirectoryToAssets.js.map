{"version":3,"sources":["writeDirectoryToAssets.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAM,MAAM,mBAAQ,YAAR,CAAqB,QAAQ,UAAR,CAArB,CAAN;;;kBAGS,UAAC,IAAD,EAAU;AACrB,QAAM,cAAc,KAAK,WAAL,CADC;AAErB,QAAM,YAAY,KAAK,SAAL,CAFG;AAGrB,QAAM,aAAa,KAAK,UAAL,CAHE;AAIrB,QAAM,UAAU,KAAK,OAAL,CAJK;AAKrB,QAAM,aAAa,KAAK,UAAL,CALE;AAMrB,QAAM,aAAa,KAAK,UAAL,CANE;AAOrB,QAAM,iBAAiB,KAAK,cAAL,CAPF;AAQrB,QAAM,mBAAmB,KAAK,gBAAL,CARJ;;AAUrB,WAAO,IAAI,UAAJ,CAAe,SAAf,EACF,GADE,CACE,UAAC,UAAD,EAAgB;AACjB,YAAI,oBAAJ,CADiB;;AAGjB,YAAM,aAAa,eAAK,QAAL,CAAc,SAAd,EAAyB,UAAzB,CAAb,CAHW;;AAKjB,sBAAc,eAAK,IAAL,CAAU,UAAV,EAAsB,UAAtB,CAAd;;;AALiB,YAQb,OAAJ,EAAa;AACT,0BAAc,eAAK,IAAL,CAAU,UAAV,EAAsB,eAAK,QAAL,CAAc,WAAd,CAAtB,CAAd,CADS;SAAb;;;AARiB,YAab,4BAAa,UAAb,EAAyB,UAAzB,CAAJ,EAA0C;AACtC,mBAAO,KAAP,CADsC;SAA1C;;;AAbiB,YAkBb,oBAAO,WAAP,MAAwB,eAAK,GAAL,EAAU;AAClC,0BAAc,YAAY,KAAZ,CAAkB,CAAlB,CAAd,CADkC;SAAtC;;AAIA,eAAO,iCAAkB;AACrB,kCADqB;AAErB,oCAFqB;AAGrB,0CAHqB;AAIrB,kCAJqB;AAKrB,8CALqB;AAMrB,oCANqB;SAAlB,CAAP,CAtBiB;KAAhB,CADT,CAVqB;CAAV","file":"writeDirectoryToAssets.js","sourcesContent":["import Promise from 'bluebird';\r\nimport _ from 'lodash';\r\nimport shouldIgnore from './shouldIgnore';\r\nimport path from 'path';\r\nimport writeFileToAssets from './writeFileToAssets';\r\n\r\n/* eslint-disable import/no-commonjs */\r\nconst dir = Promise.promisifyAll(require('node-dir'));\r\n/* eslint-enable */\r\n\r\nexport default (opts) => {\r\n    const compilation = opts.compilation;\r\n    const absDirSrc = opts.absDirSrc;\r\n    const relDirDest = opts.relDirDest;\r\n    const flatten = opts.flatten;\r\n    const forceWrite = opts.forceWrite;\r\n    const ignoreList = opts.ignoreList;\r\n    const copyUnmodified = opts.copyUnmodified;\r\n    const lastGlobalUpdate = opts.lastGlobalUpdate;\r\n\r\n    return dir.filesAsync(absDirSrc)\r\n        .map((absFileSrc) => {\r\n            let relFileDest;\r\n\r\n            const relFileSrc = path.relative(absDirSrc, absFileSrc);\r\n\r\n            relFileDest = path.join(relDirDest, relFileSrc);\r\n\r\n            // Remove any directory reference if flattening\r\n            if (flatten) {\r\n                relFileDest = path.join(relDirDest, path.basename(relFileDest));\r\n            }\r\n\r\n            // Skip if it matches any of our ignore list\r\n            if (shouldIgnore(relFileSrc, ignoreList)) {\r\n                return false;\r\n            }\r\n\r\n            // Make sure it doesn't start with the separator\r\n            if (_.head(relFileDest) === path.sep) {\r\n                relFileDest = relFileDest.slice(1);\r\n            }\r\n\r\n            return writeFileToAssets({\r\n                absFileSrc,\r\n                compilation,\r\n                copyUnmodified,\r\n                forceWrite,\r\n                lastGlobalUpdate,\r\n                relFileDest\r\n            });\r\n        });\r\n};\r\n"],"sourceRoot":"/source/"}
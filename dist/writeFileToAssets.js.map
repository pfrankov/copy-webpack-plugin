{"version":3,"sources":["writeFileToAssets.js"],"names":[],"mappings":";;;;;;;;;;;;;AAGA,IAAM,KAAK,mBAAQ,YAAR,CAAqB,QAAQ,UAAR,CAArB,CAAL;;;kBAGS,UAAC,IAAD,EAAU;AACrB,QAAM,cAAc,KAAK,WAAL;;AADC,QAGf,cAAc,KAAK,WAAL,CAAiB,OAAjB,CAAyB,KAAzB,EAAgC,GAAhC,CAAd,CAHe;AAIrB,QAAM,aAAa,KAAK,UAAL,CAJE;AAKrB,QAAM,aAAa,KAAK,UAAL,CALE;AAMrB,QAAM,mBAAmB,KAAK,gBAAL,CANJ;AAOrB,QAAM,iBAAiB,KAAK,cAAL,CAPF;;AASrB,QAAI,YAAY,MAAZ,CAAmB,WAAnB,KAAmC,CAAC,UAAD,EAAa;AAChD,eAAO,mBAAQ,OAAR,EAAP,CADgD;KAApD;;AAIA,WAAO,GACN,SADM,CACI,UADJ,EAEN,IAFM,CAED,UAAC,IAAD,EAAU;AACZ,YAAI,KAAK,WAAL,MAAsB,CAAC,cAAD,IAAmB,KAAK,KAAL,CAAW,OAAX,KAAuB,gBAAvB,EAAyC;AAClF,mBAAO,IAAP,CADkF;SAAtF;;AAIA,oBAAY,MAAZ,CAAmB,WAAnB,IAAkC;AAC9B,kCAAQ;AACJ,uBAAO,KAAK,IAAL,CADH;aADsB;AAI9B,sCAAU;AACN,uBAAO,GAAG,YAAH,CAAgB,UAAhB,CAAP,CADM;aAJoB;SAAlC,CALY;;AAcZ,eAAO,WAAP,CAdY;KAAV,CAFN,CAbqB;CAAV","file":"writeFileToAssets.js","sourcesContent":["import Promise from 'bluebird';\r\n\r\n/* eslint-disable import/no-commonjs */\r\nconst fs = Promise.promisifyAll(require('fs-extra'));\r\n/* eslint-enable */\r\n\r\nexport default (opts) => {\r\n    const compilation = opts.compilation;\r\n    // ensure forward slashes\r\n    const relFileDest = opts.relFileDest.replace(/\\\\/g, '/');\r\n    const absFileSrc = opts.absFileSrc;\r\n    const forceWrite = opts.forceWrite;\r\n    const lastGlobalUpdate = opts.lastGlobalUpdate;\r\n    const copyUnmodified = opts.copyUnmodified;\r\n\r\n    if (compilation.assets[relFileDest] && !forceWrite) {\r\n        return Promise.resolve();\r\n    }\r\n\r\n    return fs\r\n    .statAsync(absFileSrc)\r\n    .then((stat) => {\r\n        if (stat.isDirectory() || !copyUnmodified && stat.mtime.getTime() < lastGlobalUpdate) {\r\n            return null;\r\n        }\r\n\r\n        compilation.assets[relFileDest] = {\r\n            size () {\r\n                return stat.size;\r\n            },\r\n            source () {\r\n                return fs.readFileSync(absFileSrc);\r\n            }\r\n        };\r\n\r\n        return relFileDest;\r\n    });\r\n};\r\n"],"sourceRoot":"/source/"}